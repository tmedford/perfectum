/*

 FullCalendar v1.5.4
 http://arshaw.com/fullcalendar/

 Use fullcalendar.css for basic styling.
 For event drag & drop, requires jQuery UI draggable.
 For event resizing, requires jQuery UI resizable.

 Copyright (c) 2011 Adam Shaw
 Dual licensed under the MIT and GPL licenses, located in
 MIT-LICENSE.txt and GPL-LICENSE.txt respectively.

 Date: Tue Sep 4 23:38:33 2012 -0700

*/
!function(t,e){function n(e){t.extend(!0,me,e)}function r(n,r,l){function u(t){G?(S(),C(),R(),b(t)):f()}function f(){K=r.theme?"ui":"fc",n.addClass("fc"),r.isRTL&&n.addClass("fc-rtl"),r.theme&&n.addClass("ui-widget"),G=t("<div class='fc-content' style='position:relative'/>").prependTo(n),$=new a(Z,r),(Q=$.render())&&n.prepend(Q),y(r.defaultView),t(window).resize(x),m()||v()}function v(){setTimeout(function(){!te.start&&m()&&b()},0)}function h(){t(window).unbind("resize",x),$.destroy(),G.remove(),n.removeClass("fc fc-rtl ui-widget")}function g(){return 0!==se.offsetWidth}function m(){return 0!==t("body")[0].offsetWidth}function y(e){if(!te||e!=te.name){ue++,L();var n,r=te;r?((r.beforeHide||I)(),B(G,G.height()),r.element.hide()):B(G,1),G.css("overflow","hidden"),(te=ce[e])?te.element.show():te=ce[e]=new De[e](n=re=t("<div class='fc-view fc-view-"+e+"' style='position:absolute'/>").appendTo(G),Z),r&&$.deactivateButton(r.name),$.activateButton(e),b(),G.css("overflow",""),r&&B(G,1),n||(te.afterShow||I)(),ue--}}function b(t){if(g()){ue++,L(),ne===e&&S();var r=!1;!te.start||t||fe<te.start||fe>=te.end?(te.render(fe,t||0),E(!0),r=!0):te.sizeDirty?(te.clearEvents(),E(),r=!0):te.eventsDirty&&(te.clearEvents(),r=!0),te.sizeDirty=!1,te.eventsDirty=!1,T(r),ee=n.outerWidth(),$.updateTitle(te.title),t=new Date,t>=te.start&&t<te.end?$.disableButton("today"):$.enableButton("today"),ue--,te.trigger("viewDisplay",se)}}function M(){C(),g()&&(S(),E(),L(),te.clearEvents(),te.renderEvents(de),te.sizeDirty=!1)}function C(){t.each(ce,function(t,e){e.sizeDirty=!0})}function S(){ne=r.contentHeight?r.contentHeight:r.height?r.height-(Q?Q.height():0)-A(G):Math.round(G.width()/Math.max(r.aspectRatio,.5))}function E(t){ue++,te.setHeight(ne,t),re&&(re.css("position","relative"),re=null),te.setWidth(G.width(),t),ue--}function x(){if(!ue)if(te.start){var t=++le;setTimeout(function(){t==le&&!ue&&g()&&ee!=(ee=n.outerWidth())&&(ue++,M(),te.trigger("windowResize",se),ue--)},200)}else v()}function T(t){!r.lazyFetching||oe(te.visStart,te.visEnd)?k():t&&F()}function k(){ie(te.visStart,te.visEnd)}function H(t){de=t,F()}function z(t){F(t)}function F(t){R(),g()&&(te.clearEvents(),te.renderEvents(de,t),te.eventsDirty=!1)}function R(){t.each(ce,function(t,e){e.eventsDirty=!0})}function N(t,n,r){te.select(t,n,r===e?!0:r)}function L(){te&&te.unselect()}function W(){b(-1)}function _(){b(1)}function O(){i(fe,-1),b()}function Y(){i(fe,1),b()}function j(){fe=new Date,b()}function P(t,e,n){t instanceof Date?fe=d(t):p(fe,t,e,n),b()}function q(t,n,r){t!==e&&i(fe,t),n!==e&&s(fe,n),r!==e&&c(fe,r),b()}function J(){return d(fe)}function V(){return te}function X(t,n){return n===e?r[t]:(("height"==t||"contentHeight"==t||"aspectRatio"==t)&&(r[t]=n,M()),void 0)}function U(t,e){return r[t]?r[t].apply(e||se,Array.prototype.slice.call(arguments,2)):void 0}var Z=this;Z.options=r,Z.render=u,Z.destroy=h,Z.refetchEvents=k,Z.reportEvents=H,Z.reportEventChange=z,Z.rerenderEvents=F,Z.changeView=y,Z.select=N,Z.unselect=L,Z.prev=W,Z.next=_,Z.prevYear=O,Z.nextYear=Y,Z.today=j,Z.gotoDate=P,Z.incrementDate=q,Z.formatDate=function(t,e){return D(t,e,r)},Z.formatDates=function(t,e,n){return w(t,e,n,r)},Z.getDate=J,Z.getView=V,Z.option=X,Z.trigger=U,o.call(Z,r,l);var $,Q,G,K,te,ee,ne,re,ae,oe=Z.isFetchNeeded,ie=Z.fetchEvents,se=n[0],ce={},le=0,ue=0,fe=new Date,de=[];p(fe,r.year,r.month,r.date),r.droppable&&t(document).bind("dragstart",function(e,n){var a=e.target,o=t(a);if(!o.parents(".fc").length){var i=r.dropAccept;(t.isFunction(i)?i.call(a,o):o.is(i))&&(ae=a,te.dragStart(ae,e,n))}}).bind("dragstop",function(t,e){ae&&(te.dragStop(ae,t,e),ae=null)})}function a(e,n){function r(){return d=n.theme?"ui":"fc",n.header?v=t("<table class='fc-header' style='width:100%'/>").append(t("<tr/>").append(o("left")).append(o("center")).append(o("right"))):void 0}function a(){v.remove()}function o(r){var a=t("<td class='fc-header-"+r+"'/>");return(r=n.header[r])&&t.each(r.split(" "),function(r){r>0&&a.append("<span class='fc-header-space'/>");var o;t.each(this.split(","),function(r,i){if("title"==i)a.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),o&&o.addClass(d+"-corner-right"),o=null;else{var s;if(e[i]?s=e[i]:De[i]&&(s=function(){l.removeClass(d+"-state-hover"),e.changeView(i)}),s){r=n.theme?q(n.buttonIcons,i):null;var c=q(n.buttonText,i),l=t("<span class='fc-button fc-button-"+i+" "+d+"-state-default'><span class='fc-button-inner'><span class='fc-button-content'>"+(r?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+r+"'/></span>":c)+"</span><span class='fc-button-effect'><span></span></span></span></span>");l&&(l.click(function(){l.hasClass(d+"-state-disabled")||s()}).mousedown(function(){l.not("."+d+"-state-active").not("."+d+"-state-disabled").addClass(d+"-state-down")}).mouseup(function(){l.removeClass(d+"-state-down")}).hover(function(){l.not("."+d+"-state-active").not("."+d+"-state-disabled").addClass(d+"-state-hover")},function(){l.removeClass(d+"-state-hover").removeClass(d+"-state-down")}).appendTo(a),o||l.addClass(d+"-corner-left"),o=l)}}}),o&&o.addClass(d+"-corner-right")}),a}function i(t){v.find("h2").html(t)}function s(t){v.find("span.fc-button-"+t).addClass(d+"-state-active")}function c(t){v.find("span.fc-button-"+t).removeClass(d+"-state-active")}function l(t){v.find("span.fc-button-"+t).addClass(d+"-state-disabled")}function u(t){v.find("span.fc-button-"+t).removeClass(d+"-state-disabled")}var f=this;f.render=r,f.destroy=a,f.updateTitle=i,f.activateButton=s,f.deactivateButton=c,f.disableButton=l,f.enableButton=u;var d,v=t([])}function o(n,r){function a(t,e){return!S||S>t||e>E}function o(t,e){S=t,E=e,L=[],t=++F,R=e=z.length;for(var n=0;e>n;n++)i(z[n],t)}function i(t,e){s(t,function(n){if(e==F){if(n){for(var r=0;r<n.length;r++)n[r].source=t,b(n[r]);L=L.concat(n)}R--,R||k(L)}})}function s(e,r){var a,o,i=be.sourceFetchers;for(a=0;a<i.length;a++){if(o=i[a](e,S,E,r),o===!0)return;if("object"==typeof o)return s(o,r),void 0}if(a=e.events)t.isFunction(a)?(p(),a(d(S),d(E),function(t){r(t),y()})):t.isArray(a)?r(a):r();else if(e.url){var c=e.success,l=e.error,u=e.complete;a=t.extend({},e.data||{}),i=G(e.startParam,n.startParam),o=G(e.endParam,n.endParam),i&&(a[i]=Math.round(+S/1e3)),o&&(a[o]=Math.round(+E/1e3)),p(),t.ajax(t.extend({},we,e,{data:a,success:function(e){e=e||[];var n=Q(c,this,arguments);t.isArray(n)&&(e=n),r(e)},error:function(){Q(l,this,arguments),r()},complete:function(){Q(u,this,arguments),y()}}))}else r()}function c(t){(t=l(t))&&(R++,i(t,F))}function l(e){return t.isFunction(e)||t.isArray(e)?e={events:e}:"string"==typeof e&&(e={url:e}),"object"==typeof e?(D(e),z.push(e),e):void 0}function u(e){z=t.grep(z,function(t){return!w(t,e)}),L=t.grep(L,function(t){return!w(t.source,e)}),k(L)}function f(t){var e,n,r=L.length,a=T().defaultEventEnd,o=t.start-t._start,i=t.end?t.end-(t._end||a(t)):0;for(e=0;r>e;e++)n=L[e],n._id==t._id&&n!=t&&(n.start=new Date(+n.start+o),n.end=t.end?n.end?new Date(+n.end+i):new Date(+a(n)+i):null,n.title=t.title,n.url=t.url,n.allDay=t.allDay,n.className=t.className,n.editable=t.editable,n.color=t.color,n.backgroudColor=t.backgroudColor,n.borderColor=t.borderColor,n.textColor=t.textColor,b(n));b(t),k(L)}function v(t,e){b(t),t.source||(e&&(H.events.push(t),t.source=H),L.push(t)),k(L)}function h(e){if(e){if(!t.isFunction(e)){var n=e+"";e=function(t){return t._id==n}}for(L=t.grep(L,e,!0),r=0;r<z.length;r++)t.isArray(z[r].events)&&(z[r].events=t.grep(z[r].events,e,!0))}else{L=[];for(var r=0;r<z.length;r++)t.isArray(z[r].events)&&(z[r].events=[])}k(L)}function g(e){return t.isFunction(e)?t.grep(L,e):e?(e+="",t.grep(L,function(t){return t._id==e})):L}function p(){N++||x("loading",null,!0)}function y(){--N||x("loading",null,!1)}function b(t){var r=t.source||{},a=G(r.ignoreTimezone,n.ignoreTimezone);t._id=t._id||(t.id===e?"_fc"+Me++:t.id+""),t.date&&(t.start||(t.start=t.date),delete t.date),t._start=d(t.start=m(t.start,a)),t.end=m(t.end,a),t.end&&t.end<=t.start&&(t.end=null),t._end=t.end?d(t.end):null,t.allDay===e&&(t.allDay=G(r.allDayDefault,n.allDayDefault)),t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[]}function D(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=be.sourceNormalizers,n=0;n<e.length;n++)e[n](t)}function w(t,e){return t&&e&&M(t)==M(e)}function M(t){return("object"==typeof t?t.events||t.url:"")||t}var C=this;C.isFetchNeeded=a,C.fetchEvents=o,C.addEventSource=c,C.removeEventSource=u,C.updateEvent=f,C.renderEvent=v,C.removeEvents=h,C.clientEvents=g,C.normalizeEvent=b;var S,E,x=C.trigger,T=C.getView,k=C.reportEvents,H={events:[]},z=[H],F=0,R=0,N=0,L=[];for(C=0;C<r.length;C++)l(r[C])}function i(t,e,n){return t.setFullYear(t.getFullYear()+e),n||f(t),t}function s(t,e,n){if(+t){e=t.getMonth()+e;var r=d(t);for(r.setDate(1),r.setMonth(e),t.setMonth(e),n||f(t);t.getMonth()!=r.getMonth();)t.setDate(t.getDate()+(r>t?1:-1))}return t}function c(t,e,n){if(+t){e=t.getDate()+e;var r=d(t);r.setHours(9),r.setDate(e),t.setDate(e),n||f(t),l(t,r)}return t}function l(t,e){if(+t)for(;t.getDate()!=e.getDate();)t.setTime(+t+(e>t?1:-1)*Ee)}function u(t,e){return t.setMinutes(t.getMinutes()+e),t}function f(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function d(t,e){return e?f(new Date(+t)):new Date(+t)}function v(){var t,e=0;do t=new Date(1970,e++,1);while(t.getHours());return t}function h(t,e,n){for(e=e||1;!t.getDay()||n&&1==t.getDay()||!n&&6==t.getDay();)c(t,e);return t}function g(t,e){return Math.round((d(t,!0)-d(e,!0))/Se)}function p(t,n,r,a){n!==e&&n!=t.getFullYear()&&(t.setDate(1),t.setMonth(0),t.setFullYear(n)),r!==e&&r!=t.getMonth()&&(t.setDate(1),t.setMonth(r)),a!==e&&t.setDate(a)}function m(t,n){return"object"==typeof t?t:"number"==typeof t?new Date(1e3*t):"string"==typeof t?t.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(t)):(n===e&&(n=!0),y(t,n)||(t?new Date(t):null)):null}function y(t,e){if(t=t.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/),!t)return null;var n=new Date(t[1],0,1);return e||!t[13]?(e=new Date(t[1],0,1,9,0),t[3]&&(n.setMonth(t[3]-1),e.setMonth(t[3]-1)),t[5]&&(n.setDate(t[5]),e.setDate(t[5])),l(n,e),t[7]&&n.setHours(t[7]),t[8]&&n.setMinutes(t[8]),t[10]&&n.setSeconds(t[10]),t[12]&&n.setMilliseconds(1e3*Number("0."+t[12])),l(n,e)):(n.setUTCFullYear(t[1],t[3]?t[3]-1:0,t[5]||1),n.setUTCHours(t[7]||0,t[8]||0,t[10]||0,t[12]?1e3*Number("0."+t[12]):0),t[14]&&(e=60*Number(t[16])+(t[18]?Number(t[18]):0),e*="-"==t[15]?1:-1,n=new Date(+n+1e3*60*e))),n}function b(t){if("number"==typeof t)return 60*t;if("object"==typeof t)return 60*t.getHours()+t.getMinutes();if(t=t.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var e=parseInt(t[1],10);return t[3]&&(e%=12,"p"==t[3].toLowerCase().charAt(0)&&(e+=12)),60*e+(t[2]?parseInt(t[2],10):0)}}function D(t,e,n){return w(t,null,e,n)}function w(t,e,n,r){r=r||me;var a,o,i,s,c=t,l=e,u=n.length,f="";for(a=0;u>a;a++)if(o=n.charAt(a),"'"==o){for(i=a+1;u>i;i++)if("'"==n.charAt(i)){c&&(f+=i==a+1?"'":n.substring(a+1,i),a=i);break}}else if("("==o){for(i=a+1;u>i;i++)if(")"==n.charAt(i)){a=D(c,n.substring(a+1,i),r),parseInt(a.replace(/\D/,""),10)&&(f+=a),a=i;break}}else if("["==o){for(i=a+1;u>i;i++)if("]"==n.charAt(i)){o=n.substring(a+1,i),a=D(c,o,r),a!=D(l,o,r)&&(f+=a),a=i;break}}else if("{"==o)c=e,l=t;else if("}"==o)c=t,l=e;else{for(i=u;i>a;i--)if(s=Te[n.substring(a,i)]){c&&(f+=s(c,r)),a=i-1;break}i==a&&c&&(f+=o)}return f}function M(t){return t.end?C(t.end,t.allDay):c(d(t.start),1)}function C(t,e){return t=d(t),e||t.getHours()||t.getMinutes()?c(t,1):f(t)}function S(t,e){return 100*(e.msLength-t.msLength)+(t.event.start-e.event.start)}function E(t,e){return t.end>e.start&&t.start<e.end}function x(t,e,n,r){var a,o,i,s,c,l,u=[],f=t.length;for(a=0;f>a;a++)o=t[a],i=o.start,s=e[a],s>n&&r>i&&(n>i?(i=d(n),c=!1):(i=i,c=!0),s>r?(s=d(r),l=!1):(s=s,l=!0),u.push({event:o,start:i,end:s,isStart:c,isEnd:l,msLength:s-i}));return u.sort(S)}function T(t){var e,n,r,a,o,i=[],s=t.length;for(e=0;s>e;e++){for(n=t[e],r=0;;){if(a=!1,i[r])for(o=0;o<i[r].length;o++)if(E(i[r][o],n)){a=!0;break}if(!a)break;r++}i[r]?i[r].push(n):i[r]=[n]}return i}function k(n,r,a){n.unbind("mouseover").mouseover(function(n){for(var o,i=n.target;i!=this;)o=i,i=i.parentNode;(i=o._fci)!==e&&(o._fci=e,o=r[i],a(o.event,o.element,o),t(n.target).trigger(n)),n.stopPropagation()})}function H(e,n,r){for(var a,o=0;o<e.length;o++)a=t(e[o]),a.width(Math.max(0,n-F(a,r)))}function z(e,n,r){for(var a,o=0;o<e.length;o++)a=t(e[o]),a.height(Math.max(0,n-A(a,r)))}function F(t,e){return R(t)+L(t)+(e?N(t):0)}function R(e){return(parseFloat(t.css(e[0],"paddingLeft",!0))||0)+(parseFloat(t.css(e[0],"paddingRight",!0))||0)}function N(e){return(parseFloat(t.css(e[0],"marginLeft",!0))||0)+(parseFloat(t.css(e[0],"marginRight",!0))||0)}function L(e){return(parseFloat(t.css(e[0],"borderLeftWidth",!0))||0)+(parseFloat(t.css(e[0],"borderRightWidth",!0))||0)}function A(t,e){return W(t)+O(t)+(e?_(t):0)}function W(e){return(parseFloat(t.css(e[0],"paddingTop",!0))||0)+(parseFloat(t.css(e[0],"paddingBottom",!0))||0)}function _(e){return(parseFloat(t.css(e[0],"marginTop",!0))||0)+(parseFloat(t.css(e[0],"marginBottom",!0))||0)}function O(e){return(parseFloat(t.css(e[0],"borderTopWidth",!0))||0)+(parseFloat(t.css(e[0],"borderBottomWidth",!0))||0)}function B(t,e){e="number"==typeof e?e+"px":e,t.each(function(t,n){n.style.cssText+=";min-height:"+e+";_height:"+e})}function I(){}function Y(t,e){return t-e}function j(t){return Math.max.apply(Math,t)}function P(t){return(10>t?"0":"")+t}function q(t,n){if(t[n]!==e)return t[n];n=n.split(/(?=[A-Z])/);for(var r,a=n.length-1;a>=0;a--)if(r=t[n[a].toLowerCase()],r!==e)return r;return t[""]}function J(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function V(t){return t.id+"/"+t.className+"/"+t.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/gi,"")}function X(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function U(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function Z(t,e){t.each(function(t,n){n.className=n.className.replace(/^fc-\w*/,"fc-"+Ce[e.getDay()])})}function $(t,e){var n=t.source||{},r=t.color,a=n.color,o=e("eventColor"),i=t.backgroundColor||r||n.backgroundColor||a||e("eventBackgroundColor")||o;return r=t.borderColor||r||n.borderColor||a||e("eventBorderColor")||o,t=t.textColor||n.textColor||e("eventTextColor"),e=[],i&&e.push("background-color:"+i),r&&e.push("border-color:"+r),t&&e.push("color:"+t),e.join(";")}function Q(e,n,r){if(t.isFunction(e)&&(e=[e]),e){var a,o;for(a=0;a<e.length;a++)o=e[a].apply(n,r)||o;return o}}function G(){for(var t=0;t<arguments.length;t++)if(arguments[t]!==e)return arguments[t]}function K(t,e){function n(t,e){e&&(s(t,e),t.setDate(1)),t=d(t,!0),t.setDate(1),e=s(d(t),1);var n=d(t),l=d(e),u=a("firstDay"),f=a("weekends")?0:1;f&&(h(n),h(l,-1,!0)),c(n,-((n.getDay()-Math.max(u,f)+7)%7)),c(l,(7-l.getDay()+Math.max(u,f))%7),u=Math.round((l-n)/(7*Se)),"fixed"==a("weekMode")&&(c(l,7*(6-u)),u=6),r.title=i(t,a("titleFormat")),r.start=t,r.end=e,r.visStart=n,r.visEnd=l,o(6,u,f?5:7,!0)}var r=this;r.render=n,ne.call(r,t,e,"month");var a=r.opt,o=r.renderBasic,i=e.formatDate}function te(t,e){function n(t,e){e&&c(t,7*e),t=c(d(t),-((t.getDay()-a("firstDay")+7)%7)),e=c(d(t),7);var n=d(t),s=d(e),l=a("weekends");l||(h(n),h(s,-1,!0)),r.title=i(n,c(d(s),-1),a("titleFormat")),r.start=t,r.end=e,r.visStart=n,r.visEnd=s,o(1,1,l?7:5,!1)}var r=this;r.render=n,ne.call(r,t,e,"basicWeek");var a=r.opt,o=r.renderBasic,i=e.formatDates}function ee(t,e){function n(t,e){e&&(c(t,e),a("weekends")||h(t,0>e?-1:1)),r.title=i(t,a("titleFormat")),r.start=r.visStart=d(t,!0),r.end=r.visEnd=c(d(r.start),1),o(1,1,1,!1)}var r=this;r.render=n,ne.call(r,t,e,"basicDay");var a=r.opt,o=r.renderBasic,i=e.formatDate}function ne(e,n,r){function a(t,e,n,r){G=e,K=n,o(),(e=!I)?i(t,r):be(),s(e)}function o(){(ae=me("isRTL"))?(oe=-1,ie=K-1):(oe=1,ie=0),se=me("firstDay"),ce=me("weekends")?0:1,ue=me("theme")?"ui":"fc",ge=me("columnFormat")}function i(n,r){var a,o,i=ue+"-widget-header",s=ue+"-widget-content";for(a="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>",o=0;K>o;o++)a+="<th class='fc- "+i+"'/>";for(a+="</tr></thead><tbody>",o=0;n>o;o++){for(a+="<tr class='fc-week"+o+"'>",i=0;K>i;i++)a+="<td class='fc- "+s+" fc-day"+(o*K+i)+"'><div>"+(r?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";a+="</tr>"}a+="</tbody></table>",n=t(a).appendTo(e),_=n.find("thead"),O=_.find("th"),I=n.find("tbody"),Y=I.find("tr"),j=I.find("td"),P=j.filter(":first-child"),q=Y.eq(0).find("div.fc-day-content div"),U(_.add(_.find("tr"))),U(Y),Y.eq(0).addClass("fc-first"),v(j),J=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(e)}function s(e){var n,r,a,o=e||1==G,i=W.start.getMonth(),s=f(new Date);o&&O.each(function(e,a){n=t(a),r=F(e),n.html(Ce(r,ge)),Z(n,r)}),j.each(function(e,a){n=t(a),r=F(e),r.getMonth()==i?n.removeClass("fc-other-month"):n.addClass("fc-other-month"),+r==+s?n.addClass(ue+"-state-highlight fc-today"):n.removeClass(ue+"-state-highlight fc-today"),n.find("div.fc-day-number").text(r.getDate()),o&&Z(n,r)}),Y.each(function(e,n){a=t(n),G>e?(a.show(),e==G-1?a.addClass("fc-last"):a.removeClass("fc-last")):a.hide()})}function l(e){$=e,e=$-_.height();var n,r,a;"variable"==me("weekMode")?n=r=Math.floor(e/(1==G?2:6)):(n=Math.floor(e/G),r=e-n*(G-1)),P.each(function(e,o){G>e&&(a=t(o),B(a.find("> div"),(e==G-1?r:n)-A(a)))})}function u(t){V=t,ne.clear(),Q=Math.floor(V/K),H(O.slice(0,-1),Q)}function v(t){t.click(h).mousedown(Me)}function h(t){if(!me("selectable")){var e=parseInt(this.className.match(/fc\-day(\d+)/)[1]);e=F(e),ye("dayClick",this,e,!0,t)}}function p(t,e,n){n&&te.build(),n=d(W.visStart);for(var r=c(d(n),K),a=0;G>a;a++){var o=new Date(Math.max(n,t)),i=new Date(Math.min(r,e));if(i>o){var s;ae?(s=g(i,n)*oe+ie+1,o=g(o,n)*oe+ie+1):(s=g(o,n),o=g(i,n)),v(m(a,s,a,o-1))}c(n,7),c(r,7)}}function m(t,n,r,a){return t=te.rect(t,n,r,a,e),De(t,e)}function y(t){return d(t)}function b(t,e){p(t,c(d(e),1),!0)}function D(){we()}function w(t,e,n){var r=T(t);ye("dayClick",j[r.row*K+r.col],t,e,n)}function M(t,e){ee.start(function(t){we(),t&&m(t.row,t.col,t.row,t.col)},e)}function C(t,e,n){var r=ee.stop();we(),r&&(r=k(r),ye("drop",t,r,!0,e,n))}function S(t){return d(t.start)}function E(t){return ne.left(t)}function x(t){return ne.right(t)}function T(t){return{row:Math.floor(g(t,W.visStart)/7),col:R(t.getDay())}}function k(t){return z(t.row,t.col)}function z(t,e){return c(d(W.visStart),7*t+e*oe+ie)}function F(t){return z(Math.floor(t/K),t%K)}function R(t){return(t-Math.max(se,ce)+K)%K*oe+ie}function N(t){return Y.eq(t)}function L(){return{left:0,right:V}}var W=this;W.renderBasic=a,W.setHeight=l,W.setWidth=u,W.renderDayOverlay=p,W.defaultSelectionEnd=y,W.renderSelection=b,W.clearSelection=D,W.reportDayClick=w,W.dragStart=M,W.dragStop=C,W.defaultEventEnd=S,W.getHoverListener=function(){return ee},W.colContentLeft=E,W.colContentRight=x,W.dayOfWeekCol=R,W.dateCell=T,W.cellDate=k,W.cellIsAllDay=function(){return!0},W.allDayRow=N,W.allDayBounds=L,W.getRowCnt=function(){return G},W.getColCnt=function(){return K},W.getColWidth=function(){return Q},W.getDaySegmentContainer=function(){return J},le.call(W,e,n,r),de.call(W),fe.call(W),re.call(W);var _,O,I,Y,j,P,q,J,V,$,Q,G,K,te,ee,ne,ae,oe,ie,se,ce,ue,ge,me=W.opt,ye=W.trigger,be=W.clearEvents,De=W.renderOverlay,we=W.clearOverlays,Me=W.daySelectionMousedown,Ce=n.formatDate;X(e.addClass("fc-grid")),te=new ve(function(e,n){var r,a,o;O.each(function(e,i){r=t(i),a=r.offset().left,e&&(o[1]=a),o=[a],n[e]=o}),o[1]=a+r.outerWidth(),Y.each(function(n,i){G>n&&(r=t(i),a=r.offset().top,n&&(o[1]=a),o=[a],e[n]=o)}),o[1]=a+r.outerHeight()}),ee=new he(te),ne=new pe(function(t){return q.eq(t)})}function re(){function e(t,e){v(t),k(r(t),e)}function n(){h(),b().empty()}function r(e){var n=S(),r=E(),a=d(i.visStart);r=c(d(a),r);var o,s,l,u,f,v,h=t.map(e,M),g=[];for(o=0;n>o;o++){for(s=T(x(e,h,a,r)),l=0;l<s.length;l++)for(u=s[l],f=0;f<u.length;f++)v=u[f],v.row=o,v.level=l,g.push(v);c(a,7),c(r,7)}return g}function a(t,e,n){u(t)&&o(t,e),n.isEnd&&f(t)&&H(t,e,n),g(t,e)}function o(t,e){var n,r=D();e.draggable({zIndex:9,delay:50,opacity:s("dragOpacity"),revertDuration:s("dragRevertDuration"),start:function(a,o){l("eventDragStart",e,t,a,o),m(t,e),r.start(function(r,a,o,i){e.draggable("option","revert",!r||!o&&!i),C(),r?(n=7*o+i*(s("isRTL")?-1:1),w(c(d(t.start),n),c(M(t),n))):n=0},a,"drag")},stop:function(a,o){r.stop(),C(),l("eventDragStop",e,t,a,o),n?y(this,t,n,0,t.allDay,a,o):(e.css("filter",""),p(t,e))}})}var i=this;i.renderEvents=e,i.compileDaySegs=r,i.clearEvents=n,i.bindDaySeg=a,ue.call(i);var s=i.opt,l=i.trigger,u=i.isEventDraggable,f=i.isEventResizable,v=i.reportEvents,h=i.reportEventClear,g=i.eventElementHandlers,p=i.showEvents,m=i.hideEvents,y=i.eventDrop,b=i.getDaySegmentContainer,D=i.getHoverListener,w=i.renderDayOverlay,C=i.clearOverlays,S=i.getRowCnt,E=i.getColCnt,k=i.renderDaySegs,H=i.resizableDayEvent}function ae(t,e){function n(t,e){e&&c(t,7*e),t=c(d(t),-((t.getDay()-a("firstDay")+7)%7)),e=c(d(t),7);var n=d(t),s=d(e),l=a("weekends");l||(h(n),h(s,-1,!0)),r.title=i(n,c(d(s),-1),a("titleFormat")),r.start=t,r.end=e,r.visStart=n,r.visEnd=s,o(l?7:5)}var r=this;r.render=n,ie.call(r,t,e,"agendaWeek");var a=r.opt,o=r.renderAgenda,i=e.formatDates}function oe(t,e){function n(t,e){e&&(c(t,e),a("weekends")||h(t,0>e?-1:1)),e=d(t,!0);var n=c(d(e),1);r.title=i(t,a("titleFormat")),r.start=r.visStart=e,r.end=r.visEnd=n,o(1)}var r=this;r.render=n,ie.call(r,t,e,"agendaDay");var a=r.opt,o=r.renderAgenda,i=e.formatDate}function ie(n,r,a){function o(t){Le=t,i(),te?$e():s(),l()}function i(){Be=Ue("theme")?"ui":"fc",Ye=Ue("weekends")?0:1,Ie=Ue("firstDay"),(je=Ue("isRTL"))?(Pe=-1,qe=Le-1):(Pe=1,qe=0),Je=b(Ue("minTime")),Ve=b(Ue("maxTime")),Xe=Ue("columnFormat")}function s(){var e,r,a,o,i,s=Be+"-widget-header",c=Be+"-widget-content",l=0==Ue("slotMinutes")%15;for(e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+s+"'>&nbsp;</th>",r=0;Le>r;r++)e+="<th class='fc- fc-col"+r+" "+s+"'/>";for(e+="<th class='fc-agenda-gutter "+s+"'>&nbsp;</th></tr></thead><tbody><tr><th class='fc-agenda-axis "+s+"'>&nbsp;</th>",r=0;Le>r;r++)e+="<td class='fc- fc-col"+r+" "+c+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";for(e+="<td class='fc-agenda-gutter "+c+"'>&nbsp;</td></tr></tbody></table>",te=t(e).appendTo(n),ee=te.find("thead"),ne=ee.find("th").slice(1,-1),re=te.find("tbody"),ae=re.find("td").slice(0,-1),oe=ae.find("div.fc-day-content div"),ie=ae.eq(0),ce=ie.find("> div"),U(ee.add(ee.find("tr"))),U(re.add(re.find("tr"))),Se=ee.find("th:first"),Ee=te.find(".fc-agenda-gutter"),ue=t("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),Ue("allDaySlot")?(ge=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ue),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+s+" fc-agenda-axis'>"+Ue("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+s+" fc-agenda-gutter'>&nbsp;</th></tr></table>",me=t(e).appendTo(ue),ye=me.find("tr"),w(ye.find("td")),Se=Se.add(me.find("th:first")),Ee=Ee.add(me.find("th.fc-agenda-gutter")),ue.append("<div class='fc-agenda-divider "+s+"'><div class='fc-agenda-divider-inner'/></div>")):ge=t([]),be=t("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(ue),De=t("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(be),we=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(De),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",a=v(),o=u(d(a),Ve),u(a,Je),r=Ae=0;o>a;r++)i=a.getMinutes(),e+="<tr class='fc-slot"+r+" "+(i?"fc-minor":"")+"'><th class='fc-agenda-axis "+s+"'>"+(l&&i?"&nbsp;":rn(a,Ue("axisFormat")))+"</th><td class='"+c+"'><div style='position:relative'>&nbsp;</div></td></tr>",u(a,Ue("slotMinutes")),Ae++;e+="</tbody></table>",Me=t(e).appendTo(De),Ce=Me.find("div:first"),M(Me.find("td")),Se=Se.add(Me.find("th:first"))}function l(){var t,e,n,r,a=f(new Date);for(t=0;Le>t;t++)r=N(t),e=ne.eq(t),e.html(rn(r,Xe)),n=ae.eq(t),+r==+a?n.addClass(Be+"-state-highlight fc-today"):n.removeClass(Be+"-state-highlight fc-today"),Z(e.add(n),r)}function h(t,n){t===e&&(t=ke),ke=t,an={};var r=re.position().top,a=be.position().top;t=Math.min(t-r,Me.height()+a+1),ce.height(t-A(ie)),ue.css("top",r),be.height(t-a-1),Re=Ce.height()+1,n&&m()}function p(e){Te=e,Oe.clear(),He=0,H(Se.width("").each(function(e,n){He=Math.max(He,t(n).outerWidth())}),He),e=be[0].clientWidth,(Fe=be.width()-e)?(H(Ee,Fe),Ee.show().prev().removeClass("fc-last")):Ee.hide().prev().addClass("fc-last"),ze=Math.floor((e-He)/Le),H(ne.slice(0,-1),ze)}function m(){function t(){be.scrollTop(r)}var e=v(),n=d(e);n.setHours(Ue("firstHour"));var r=_(e,n)+1;t(),setTimeout(t,0)}function y(){Ne=be.scrollTop()}function D(){be.scrollTop(Ne)}function w(t){t.click(C).mousedown(en)}function M(t){t.click(C).mousedown(V)}function C(t){if(!Ue("selectable")){var e=Math.min(Le-1,Math.floor((t.pageX-te.offset().left-He)/ze)),n=N(e),r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){r=parseInt(r[1])*Ue("slotMinutes");var a=Math.floor(r/60);n.setHours(a),n.setMinutes(r%60+Je),Ze("dayClick",ae[e],n,!1,t)}else Ze("dayClick",ae[e],n,!0,t)}}function S(t,e,n){n&&We.build();var r=d(K.visStart);je?(n=g(e,r)*Pe+qe+1,t=g(t,r)*Pe+qe+1):(n=g(t,r),t=g(e,r)),n=Math.max(0,n),t=Math.min(Le,t),t>n&&w(E(0,n,0,t-1))}function E(t,e,n,r){return t=We.rect(t,e,n,r,ue),Qe(t,ue)}function x(t,e){for(var n=d(K.visStart),r=c(d(n),1),a=0;Le>a;a++){var o=new Date(Math.max(n,t)),i=new Date(Math.min(r,e));if(i>o){var s=a*Pe+qe;s=We.rect(0,s,0,s,De),o=_(n,o),i=_(n,i),s.top=o,s.height=i-o,M(Qe(s,De))}c(n,1),c(r,1)}}function T(t){return Oe.left(t)}function k(t){return Oe.right(t)}function F(t){return{row:Math.floor(g(t,K.visStart)/7),col:W(t.getDay())}}function R(t){var e=N(t.col);return t=t.row,Ue("allDaySlot")&&t--,t>=0&&u(e,Je+t*Ue("slotMinutes")),e}function N(t){return c(d(K.visStart),t*Pe+qe)}function L(t){return Ue("allDaySlot")&&!t.row}function W(t){return(t-Math.max(Ie,Ye)+Le)%Le*Pe+qe}function _(t,n){if(t=d(t,!0),n<u(d(t),Je))return 0;if(n>=u(d(t),Ve))return Me.height();t=Ue("slotMinutes"),n=60*n.getHours()+n.getMinutes()-Je;var r=Math.floor(n/t),a=an[r];return a===e&&(a=an[r]=Me.find("tr:eq("+r+") td div")[0].offsetTop),Math.max(0,Math.round(a-1+Re*(n%t/t)))}function O(){return{left:He,right:Te-Fe}}function B(){return ye}function I(t){var e=d(t.start);return t.allDay?e:u(e,Ue("defaultEventMinutes"))}function j(t,e){return e?d(t):u(d(t),Ue("slotMinutes"))}function P(t,e,n){n?Ue("allDaySlot")&&S(t,c(d(e),1),!0):q(t,e)}function q(e,n){var r=Ue("selectHelper");if(We.build(),r){var a=g(e,K.visStart)*Pe+qe;if(a>=0&&Le>a){a=We.rect(0,a,0,a,De);var o=_(e,e),i=_(e,n);i>o&&(a.top=o,a.height=i-o,a.left+=2,a.width-=5,t.isFunction(r)?(e=r(e,n))&&(a.position="absolute",a.zIndex=8,xe=t(e).css(a).appendTo(De)):(a.isStart=!0,a.isEnd=!0,xe=t(nn({title:"",start:e,end:n,className:["fc-select-helper"],editable:!1},a)),xe.css("opacity",Ue("dragOpacity"))),xe&&(M(xe),De.append(xe),H(xe,a.width,!0),z(xe,a.height,!0)))}}else x(e,n)}function J(){Ge(),xe&&(xe.remove(),xe=null)}function V(e){if(1==e.which&&Ue("selectable")){tn(e);var n;_e.start(function(t,e){J(),t&&t.col==e.col&&!L(t)?(e=R(e),t=R(t),n=[e,u(d(e),Ue("slotMinutes")),t,u(d(t),Ue("slotMinutes"))].sort(Y),q(n[0],n[3])):n=null},e),t(document).one("mouseup",function(t){_e.stop(),n&&(+n[0]==+n[1]&&$(n[0],!1,t),Ke(n[0],n[3],!1,t))})}}function $(t,e,n){Ze("dayClick",ae[W(t.getDay())],t,e,n)}function Q(t,e){_e.start(function(t){if(Ge(),t)if(L(t))E(t.row,t.col,t.row,t.col);else{t=R(t);var e=u(d(t),Ue("defaultEventMinutes"));x(t,e)}},e)}function G(t,e,n){var r=_e.stop();Ge(),r&&Ze("drop",t,R(r),L(r),e,n)}var K=this;K.renderAgenda=o,K.setWidth=p,K.setHeight=h,K.beforeHide=y,K.afterShow=D,K.defaultEventEnd=I,K.timePosition=_,K.dayOfWeekCol=W,K.dateCell=F,K.cellDate=R,K.cellIsAllDay=L,K.allDayRow=B,K.allDayBounds=O,K.getHoverListener=function(){return _e},K.colContentLeft=T,K.colContentRight=k,K.getDaySegmentContainer=function(){return ge},K.getSlotSegmentContainer=function(){return we},K.getMinMinute=function(){return Je},K.getMaxMinute=function(){return Ve},K.getBodyContent=function(){return De},K.getRowCnt=function(){return 1},K.getColCnt=function(){return Le},K.getColWidth=function(){return ze},K.getSlotHeight=function(){return Re},K.defaultSelectionEnd=j,K.renderDayOverlay=S,K.renderSelection=P,K.clearSelection=J,K.reportDayClick=$,K.dragStart=Q,K.dragStop=G,le.call(K,n,r,a),de.call(K),fe.call(K),se.call(K);var te,ee,ne,re,ae,oe,ie,ce,ue,ge,me,ye,be,De,we,Me,Ce,Se,Ee,xe,Te,ke,He,ze,Fe,Re,Ne,Le,Ae,We,_e,Oe,Be,Ie,Ye,je,Pe,qe,Je,Ve,Xe,Ue=K.opt,Ze=K.trigger,$e=K.clearEvents,Qe=K.renderOverlay,Ge=K.clearOverlays,Ke=K.reportSelection,tn=K.unselect,en=K.daySelectionMousedown,nn=K.slotSegHtml,rn=r.formatDate,an={};X(n.addClass("fc-agenda")),We=new ve(function(e,n){function r(t){return Math.max(c,Math.min(l,t))}var a,o,i;ne.each(function(e,r){a=t(r),o=a.offset().left,e&&(i[1]=o),i=[o],n[e]=i}),i[1]=o+a.outerWidth(),Ue("allDaySlot")&&(a=ye,o=a.offset().top,e[0]=[o,o+a.outerHeight()]);for(var s=De.offset().top,c=be.offset().top,l=c+be.outerHeight(),u=0;Ae>u;u++)e.push([r(s+Re*u),r(s+Re*(u+1))])}),_e=new he(We),Oe=new pe(function(t){return oe.eq(t)})}function se(){function n(t,e){S(t);var n,r=t.length,i=[],c=[];for(n=0;r>n;n++)t[n].allDay?i.push(t[n]):c.push(t[n]);y("allDaySlot")&&(j(a(i),e),R()),s(o(c),e)}function r(){E(),N().empty(),L().empty()}function a(e){e=T(x(e,t.map(e,M),m.visStart,m.visEnd));var n,r,a,o,i=e.length,s=[];for(n=0;i>n;n++)for(r=e[n],a=0;a<r.length;a++)o=r[a],o.row=0,o.level=n,s.push(o);return s}function o(e){var n,r,a,o,s,l,f=q(),v=O(),h=_(),g=u(d(m.visStart),v),p=t.map(e,i),y=[];for(n=0;f>n;n++){for(r=T(x(e,p,g,u(d(g),h-v))),ce(r),a=0;a<r.length;a++)for(o=r[a],s=0;s<o.length;s++)l=o[s],l.col=n,l.level=a,y.push(l);c(g,1,!0)}return y}function i(t){return t.end?d(t.end):u(d(t.start),y("defaultEventMinutes"))}function s(n,r){var a,o,i,s,c,u,f,d,h,g,p,m,D,w=n.length,M="",C={},S={},E=L();for(a=q(),(p=y("isRTL"))?(m=-1,D=a-1):(m=1,D=0),a=0;w>a;a++)o=n[a],i=o.event,s=B(o.start,o.start),c=B(o.start,o.end),u=o.col,f=o.level,d=o.forward||0,h=I(u*m+D),g=Y(u*m+D)-h,g=Math.min(g-6,.95*g),u=f?g/(f+d+1):d?2*(g/(d+1)-6):g,f=h+g/(f+d+1)*f*m+(p?g-u:0),o.top=s,o.left=f,o.outerWidth=u,o.outerHeight=c-s,M+=l(i,o);for(E[0].innerHTML=M,p=E.children(),a=0;w>a;a++)o=n[a],i=o.event,M=t(p[a]),m=b("eventRender",i,i,M),m===!1?M.remove():(m&&m!==!0&&(M.remove(),M=t(m).css({position:"absolute",top:o.top,left:o.left}).appendTo(E)),o.element=M,i._id===r?v(i,M,o):M[0]._fci=a,Q(i,M));for(k(E,n,v),a=0;w>a;a++)o=n[a],(M=o.element)&&(i=C[r=o.key=V(M[0])],o.vsides=i===e?C[r]=A(M,!0):i,i=S[r],o.hsides=i===e?S[r]=F(M,!0):i,r=M.find("div.fc-event-content"),r.length&&(o.contentTop=r[0].offsetTop));for(a=0;w>a;a++)o=n[a],(M=o.element)&&(M[0].style.width=Math.max(0,o.outerWidth-o.hsides)+"px",C=Math.max(0,o.outerHeight-o.vsides),M[0].style.height=C+"px",i=o.event,o.contentTop!==e&&C-o.contentTop<10&&(M.find("div.fc-event-time").text(oe(i.start,y("timeFormat"))+" - "+i.title),M.find("div.fc-event-title").remove()),b("eventAfterRender",i,i,M))}function l(t,e){var n="<",r=t.url,a=$(t,y),o=a?" style='"+a+"'":"",i=["fc-event","fc-event-skin","fc-event-vert"];return D(t)&&i.push("fc-event-draggable"),e.isStart&&i.push("fc-corner-top"),e.isEnd&&i.push("fc-corner-bottom"),i=i.concat(t.className),t.source&&(i=i.concat(t.source.className||[])),n+=r?"a href='"+J(t.url)+"'":"div",n+=" class='"+i.join(" ")+"' style='position:absolute;z-index:8;top:"+e.top+"px;left:"+e.left+"px;"+a+"'><div class='fc-event-inner fc-event-skin'"+o+"><div class='fc-event-head fc-event-skin'"+o+"><div class='fc-event-time'>"+J(ie(t.start,t.end,y("timeFormat")))+"</div></div><div class='fc-event-content'><div class='fc-event-title'>"+J(t.title)+"</div></div><div class='fc-event-bg'></div></div>",e.isEnd&&w(t)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(r?"a":"div")+">"}function f(t,e,n){D(t)&&h(t,e,n.isStart),n.isEnd&&w(t)&&P(t,e,n),H(t,e)
}function v(t,e,n){var r=e.find("div.fc-event-time");D(t)&&g(t,e,r),n.isEnd&&w(t)&&p(t,e,r),H(t,e)}function h(t,e,n){function r(){s||(e.width(a).height("").draggable("option","grid",null),s=!0)}var a,o,i,s=!0,l=y("isRTL")?-1:1,u=W(),f=X(),v=U(),h=O();e.draggable({zIndex:9,opacity:y("dragOpacity","month"),revertDuration:y("dragRevertDuration"),start:function(h,g){b("eventDragStart",e,t,h,g),K(t,e),a=e.width(),u.start(function(a,u,h,g){re(),a?(o=!1,i=g*l,a.row?n?s&&(e.width(f-10),z(e,v*Math.round((t.end?(t.end-t.start)/xe:y("defaultEventMinutes"))/y("slotMinutes"))),e.draggable("option","grid",[f,1]),s=!1):o=!0:(ne(c(d(t.start),i),c(M(t),i)),r()),o=o||s&&!i):(r(),o=!0),e.draggable("option","revert",o)},h,"drag")},stop:function(n,a){if(u.stop(),re(),b("eventDragStop",e,t,n,a),o)r(),e.css("filter",""),G(t,e);else{var c=0;s||(c=Math.round((e.offset().top-Z().offset().top)/v)*y("slotMinutes")+h-(60*t.start.getHours()+t.start.getMinutes())),te(this,t,i,c,s,n,a)}}})}function g(t,e,n){function r(e){var r,a=u(d(t.start),e);t.end&&(r=u(d(t.end),e)),n.text(ie(a,r,y("timeFormat")))}function a(){f&&(n.css("display",""),e.draggable("option","grid",[p,m]),f=!1)}var o,i,s,l,f=!1,v=y("isRTL")?-1:1,h=W(),g=q(),p=X(),m=U();e.draggable({zIndex:9,scroll:!1,grid:[p,m],axis:1==g?"y":!1,opacity:y("dragOpacity"),revertDuration:y("dragRevertDuration"),start:function(r,u){b("eventDragStart",e,t,r,u),K(t,e),o=e.position(),s=l=0,h.start(function(r,o,s,l){e.draggable("option","revert",!r),re(),r&&(i=l*v,y("allDaySlot")&&!r.row?(f||(f=!0,n.hide(),e.draggable("option","grid",null)),ne(c(d(t.start),i),c(M(t),i))):a())},r,"drag")},drag:function(t,e){s=Math.round((e.position.top-o.top)/m)*y("slotMinutes"),s!=l&&(f||r(s),l=s)},stop:function(n,c){var l=h.stop();re(),b("eventDragStop",e,t,n,c),l&&(i||s||f)?te(this,t,i,f?0:s,f,n,c):(a(),e.css("filter",""),e.css(o),r(0),G(t,e))}})}function p(t,e,n){var r,a,o=U();e.resizable({handles:{s:"div.ui-resizable-s"},grid:o,start:function(n,o){r=a=0,K(t,e),e.css("z-index",9),b("eventResizeStart",this,t,n,o)},resize:function(i,s){r=Math.round((Math.max(o,e.height())-s.originalSize.height)/o),r!=a&&(n.text(ie(t.start,r||t.end?u(C(t),y("slotMinutes")*r):null,y("timeFormat"))),a=r)},stop:function(n,a){b("eventResizeStop",this,t,n,a),r?ee(this,t,0,y("slotMinutes")*r,n,a):(e.css("z-index",8),G(t,e))}})}var m=this;m.renderEvents=n,m.compileDaySegs=a,m.clearEvents=r,m.slotSegHtml=l,m.bindDaySeg=f,ue.call(m);var y=m.opt,b=m.trigger,D=m.isEventDraggable,w=m.isEventResizable,C=m.eventEnd,S=m.reportEvents,E=m.reportEventClear,H=m.eventElementHandlers,R=m.setHeight,N=m.getDaySegmentContainer,L=m.getSlotSegmentContainer,W=m.getHoverListener,_=m.getMaxMinute,O=m.getMinMinute,B=m.timePosition,I=m.colContentLeft,Y=m.colContentRight,j=m.renderDaySegs,P=m.resizableDayEvent,q=m.getColCnt,X=m.getColWidth,U=m.getSlotHeight,Z=m.getBodyContent,Q=m.reportEventElement,G=m.showEvents,K=m.hideEvents,te=m.eventDrop,ee=m.eventResize,ne=m.renderDayOverlay,re=m.clearOverlays,ae=m.calendar,oe=ae.formatDate,ie=ae.formatDates}function ce(t){var e,n,r,a,o,i;for(e=t.length-1;e>0;e--)for(a=t[e],n=0;n<a.length;n++)for(o=a[n],r=0;r<t[e-1].length;r++)i=t[e-1][r],E(o,i)&&(i.forward=Math.max(i.forward||0,(o.forward||0)+1))}function le(t,n,r){function a(t,e){return t=F[t],"object"==typeof t?q(t,e||r):t}function o(t,e){return n.trigger.apply(n,[t,e||S].concat(Array.prototype.slice.call(arguments,2),[S]))}function i(t){return l(t)&&!a("disableDragging")}function s(t){return l(t)&&!a("disableResizing")}function l(t){return G(t.editable,(t.source||{}).editable,a("editable"))}function f(t){k={};var e,n,r=t.length;for(e=0;r>e;e++)n=t[e],k[n._id]?k[n._id].push(n):k[n._id]=[n]}function v(t){return t.end?d(t.end):E(t)}function h(t,e){H.push(e),z[t._id]?z[t._id].push(e):z[t._id]=[e]}function g(){H=[],z={}}function p(t,e){e.click(function(n){return e.hasClass("ui-draggable-dragging")||e.hasClass("ui-resizable-resizing")?void 0:o("eventClick",this,t,n)}).hover(function(e){o("eventMouseover",this,t,e)},function(e){o("eventMouseout",this,t,e)})}function m(t,e){b(t,e,"show")}function y(t,e){b(t,e,"hide")}function b(t,e,n){t=z[t._id];var r,a=t.length;for(r=0;a>r;r++)e&&t[r][0]==e[0]||t[r][n]()}function D(t,e,n,r,a,i,s){var c=e.allDay,l=e._id;M(k[l],n,r,a),o("eventDrop",t,e,n,r,a,function(){M(k[l],-n,-r,c),T(l)},i,s),T(l)}function w(t,e,n,r,a,i){var s=e._id;C(k[s],n,r),o("eventResize",t,e,n,r,function(){C(k[s],-n,-r),T(s)},a,i),T(s)}function M(t,n,r,a){r=r||0;for(var o,i=t.length,s=0;i>s;s++)o=t[s],a!==e&&(o.allDay=a),u(c(o.start,n,!0),r),o.end&&(o.end=u(c(o.end,n,!0),r)),x(o,F)}function C(t,e,n){n=n||0;for(var r,a=t.length,o=0;a>o;o++)r=t[o],r.end=u(c(v(r),e,!0),n),x(r,F)}var S=this;S.element=t,S.calendar=n,S.name=r,S.opt=a,S.trigger=o,S.isEventDraggable=i,S.isEventResizable=s,S.reportEvents=f,S.eventEnd=v,S.reportEventElement=h,S.reportEventClear=g,S.eventElementHandlers=p,S.showEvents=m,S.hideEvents=y,S.eventDrop=D,S.eventResize=w;var E=S.defaultEventEnd,x=n.normalizeEvent,T=n.reportEventChange,k={},H=[],z={},F=n.options}function ue(){function n(t,e){var n,r,c,d,p=B(),m=T(),y=H(),b=0,D=t.length;for(p[0].innerHTML=a(t),o(t,p.children()),i(t),s(t,p,e),l(t),u(t),f(t),e=v(),p=0;m>p;p++){for(n=[],r=0;y>r;r++)n[r]=0;for(;D>b&&(c=t[b]).row==p;){for(r=j(n.slice(c.startCol,c.endCol)),c.top=r,r+=c.outerHeight,d=c.startCol;d<c.endCol;d++)n[d]=r;b++}e[p].height(j(n))}g(t,h(e))}function r(e,n,r){var i,s=t("<div/>"),c=B(),d=e.length;for(s[0].innerHTML=a(e),s=s.children(),c.append(s),o(e,s),l(e),u(e),f(e),g(e,h(v())),s=[],c=0;d>c;c++)(i=e[c].element)&&(e[c].row===n&&i.css("top",r),s.push(i[0]));return t(s)}function a(t){var e,n,r,a,o,i=y("isRTL"),s=t.length;e=R();var c,l,u,f,d,v=e.left,h=e.right,g="";for(e=0;s>e;e++)n=t[e],r=n.event,o=["fc-event","fc-event-skin","fc-event-hori"],D(r)&&o.push("fc-event-draggable"),i?(n.isStart&&o.push("fc-corner-right"),n.isEnd&&o.push("fc-corner-left"),c=A(n.end.getDay()-1),l=A(n.start.getDay()),u=n.isEnd?N(c):v,f=n.isStart?L(l):h):(n.isStart&&o.push("fc-corner-left"),n.isEnd&&o.push("fc-corner-right"),c=A(n.start.getDay()),l=A(n.end.getDay()-1),u=n.isStart?N(c):v,f=n.isEnd?L(l):h),o=o.concat(r.className),r.source&&(o=o.concat(r.source.className||[])),a=r.url,d=$(r,y),g+=a?"<a href='"+J(a)+"'":"<div",g+=" class='"+o.join(" ")+"' style='position:absolute;z-index:8;left:"+u+"px;"+d+"'><div class='fc-event-inner fc-event-skin'"+(d?" style='"+d+"'":"")+">",!r.allDay&&n.isStart&&(g+="<span class='fc-event-time'>"+J(Y(r.start,r.end,y("timeFormat")))+"</span>"),g+="<span class='fc-event-title'>"+J(r.title)+"</span></div>",n.isEnd&&w(r)&&(g+="<div class='ui-resizable-handle ui-resizable-"+(i?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),g+="</"+(a?"a":"div")+">",n.left=u,n.outerWidth=f-u,n.startCol=c,n.endCol=l+1;return g}function o(e,n){var r,a,o,i,s=e.length;for(r=0;s>r;r++)a=e[r],o=a.event,i=t(n[r]),o=b("eventRender",o,o,i),o===!1?i.remove():(o&&o!==!0&&(o=t(o).css({position:"absolute",left:a.left}),i.replaceWith(o),i=o),a.element=i)}function i(t){var e,n,r,a=t.length;for(e=0;a>e;e++)n=t[e],(r=n.element)&&C(n.event,r)}function s(t,e,n){var r,a,o,i,s=t.length;for(r=0;s>r;r++)a=t[r],(o=a.element)&&(i=a.event,i._id===n?I(i,o,a):o[0]._fci=r);k(e,t,I)}function l(t){var n,r,a,o,i,s=t.length,c={};for(n=0;s>n;n++)r=t[n],(a=r.element)&&(o=r.key=V(a[0]),i=c[o],i===e&&(i=c[o]=F(a,!0)),r.hsides=i)}function u(t){var e,n,r,a=t.length;for(e=0;a>e;e++)n=t[e],(r=n.element)&&(r[0].style.width=Math.max(0,n.outerWidth-n.hsides)+"px")}function f(t){var n,r,a,o,i,s=t.length,c={};for(n=0;s>n;n++)r=t[n],(a=r.element)&&(o=r.key,i=c[o],i===e&&(i=c[o]=_(a)),r.outerHeight=a[0].offsetHeight+i)}function v(){var t,e=T(),n=[];for(t=0;e>t;t++)n[t]=z(t).find("td:first div.fc-day-content > div");return n}function h(t){var e,n=t.length,r=[];for(e=0;n>e;e++)r[e]=t[e][0].offsetTop;return r}function g(t,e){var n,r,a,o=t.length;for(n=0;o>n;n++)r=t[n],(a=r.element)&&(a[0].style.top=e[r.row]+(r.top||0)+"px",r=r.event,b("eventAfterRender",r,r,a))}function p(e,n,a){var o=y("isRTL"),i=o?"w":"e",s=n.find("div.ui-resizable-"+i),l=!1;X(n),n.mousedown(function(t){t.preventDefault()}).click(function(t){l&&(t.preventDefault(),t.stopImmediatePropagation())}),s.mousedown(function(s){function u(n){b("eventResizeStop",this,e,n),t("body").css("cursor",""),h.stop(),q(),f&&x(this,e,f,0,n),setTimeout(function(){l=!1},0)}if(1==s.which){l=!0;var f,v,h=m.getHoverListener(),g=T(),p=H(),y=o?-1:1,D=o?p-1:0,w=n.css("top"),C=t.extend({},e),k=W(e.start);U(),t("body").css("cursor",i+"-resize").one("mouseup",u),b("eventResizeStart",this,e,s),h.start(function(t,n){if(t){var s=Math.max(k.row,t.row);t=t.col,1==g&&(s=0),s==k.row&&(t=o?Math.min(k.col,t):Math.max(k.col,t)),f=7*s+t*y+D-(7*n.row+n.col*y+D),n=c(M(e),f,!0),f?(C.end=n,s=v,v=r(O([C]),a.row,w),v.find("*").css("cursor",i+"-resize"),s&&s.remove(),E(e)):v&&(S(e),v.remove(),v=null),q(),P(e.start,c(d(n),1))}},s)}})}var m=this;m.renderDaySegs=n,m.resizableDayEvent=p;var y=m.opt,b=m.trigger,D=m.isEventDraggable,w=m.isEventResizable,M=m.eventEnd,C=m.reportEventElement,S=m.showEvents,E=m.hideEvents,x=m.eventResize,T=m.getRowCnt,H=m.getColCnt,z=m.allDayRow,R=m.allDayBounds,N=m.colContentLeft,L=m.colContentRight,A=m.dayOfWeekCol,W=m.dateCell,O=m.compileDaySegs,B=m.getDaySegmentContainer,I=m.bindDaySeg,Y=m.calendar.formatDates,P=m.renderDayOverlay,q=m.clearOverlays,U=m.clearSelection}function fe(){function e(t,e,a){n(),e||(e=c(t,a)),l(t,e,a),r(t,e,a)}function n(t){f&&(f=!1,u(),s("unselect",null,t))}function r(t,e,n,r){f=!0,s("select",null,t,e,n,r)}function a(e){var a=o.cellDate,s=o.cellIsAllDay,c=o.getHoverListener(),f=o.reportDayClick;if(1==e.which&&i("selectable")){n(e);var d;c.start(function(t,e){u(),t&&s(t)?(d=[a(e),a(t)].sort(Y),l(d[0],d[1],!0)):d=null},e),t(document).one("mouseup",function(t){c.stop(),d&&(+d[0]==+d[1]&&f(d[0],!0,t),r(d[0],d[1],!0,t))})}}var o=this;o.select=e,o.unselect=n,o.reportSelection=r,o.daySelectionMousedown=a;var i=o.opt,s=o.trigger,c=o.defaultSelectionEnd,l=o.renderSelection,u=o.clearSelection,f=!1;i("selectable")&&i("unselectAuto")&&t(document).mousedown(function(e){var r=i("unselectCancel");r&&t(e.target).parents(r).length||n(e)})}function de(){function e(e,n){var r=o.shift();return r||(r=t("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),r[0].parentNode!=n[0]&&r.appendTo(n),a.push(r.css(e).show()),r}function n(){for(var t;t=a.shift();)o.push(t.hide().unbind())}var r=this;r.renderOverlay=e,r.clearOverlays=n;var a=[],o=[]}function ve(t){var e,n,r=this;r.build=function(){e=[],n=[],t(e,n)},r.cell=function(t,r){var a,o=e.length,i=n.length,s=-1,c=-1;for(a=0;o>a;a++)if(r>=e[a][0]&&r<e[a][1]){s=a;break}for(a=0;i>a;a++)if(t>=n[a][0]&&t<n[a][1]){c=a;break}return s>=0&&c>=0?{row:s,col:c}:null},r.rect=function(t,r,a,o,i){return i=i.offset(),{top:e[t][0]-i.top,left:n[r][0]-i.left,width:n[o][1]-n[r][0],height:e[a][1]-e[t][0]}}}function he(e){function n(t){ge(t),t=e.cell(t.pageX,t.pageY),(!t!=!i||t&&(t.row!=i.row||t.col!=i.col))&&(t?(o||(o=t),a(t,o,t.row-o.row,t.col-o.col)):a(t,o),i=t)}var r,a,o,i,s=this;s.start=function(s,c,l){a=s,o=i=null,e.build(),n(c),r=l||"mousemove",t(document).bind(r,n)},s.stop=function(){return t(document).unbind(r,n),i}}function ge(t){t.pageX===e&&(t.pageX=t.originalEvent.pageX,t.pageY=t.originalEvent.pageY)}function pe(t){function n(e){return a[e]=a[e]||t(e)}var r=this,a={},o={},i={};r.left=function(t){return o[t]=o[t]===e?n(t).position().left:o[t]},r.right=function(t){return i[t]=i[t]===e?r.left(t)+n(t).width():i[t]},r.clear=function(){a={},o={},i={}}}var me={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},ye={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},be=t.fullCalendar={version:"1.5.4"},De=be.views={};t.fn.fullCalendar=function(n){if("string"==typeof n){var a,o=Array.prototype.slice.call(arguments,1);return this.each(function(){var r=t.data(this,"fullCalendar");r&&t.isFunction(r[n])&&(r=r[n].apply(r,o),a===e&&(a=r),"destroy"==n&&t.removeData(this,"fullCalendar"))}),a!==e?a:this}var i=n.eventSources||[];return delete n.eventSources,n.events&&(i.push(n.events),delete n.events),n=t.extend(!0,{},me,n.isRTL||n.isRTL===e&&me.isRTL?ye:{},n),this.each(function(e,a){e=t(a),a=new r(e,n,i),e.data("fullCalendar",a),a.render()}),this},be.sourceNormalizers=[],be.sourceFetchers=[];var we={dataType:"json",cache:!1},Me=1;be.addDays=c,be.cloneDate=d,be.parseDate=m,be.parseISO8601=y,be.parseTime=b,be.formatDate=D,be.formatDates=w;var Ce=["sun","mon","tue","wed","thu","fri","sat"],Se=864e5,Ee=36e5,xe=6e4,Te={s:function(t){return t.getSeconds()},ss:function(t){return P(t.getSeconds())},m:function(t){return t.getMinutes()},mm:function(t){return P(t.getMinutes())},h:function(t){return t.getHours()%12||12},hh:function(t){return P(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return P(t.getHours())},d:function(t){return t.getDate()},dd:function(t){return P(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return P(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return(t.getFullYear()+"").substring(2)},yyyy:function(t){return t.getFullYear()},t:function(t){return t.getHours()<12?"a":"p"},tt:function(t){return t.getHours()<12?"am":"pm"},T:function(t){return t.getHours()<12?"A":"P"},TT:function(t){return t.getHours()<12?"AM":"PM"},u:function(t){return D(t,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(t){return t=t.getDate(),t>10&&20>t?"th":["st","nd","rd"][t%10-1]||"th"}};be.applyAll=Q,De.month=K,De.basicWeek=te,De.basicDay=ee,n({weekMode:"fixed"}),De.agendaWeek=ae,De.agendaDay=oe,n({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24})}(jQuery);